import React, { Component, useEffect, useState, useContext } from "react";
import {
    StyleSheet,
    TextInput,
    Alert,
    View,
    Text,
    Modal,
    ActivityIndicator,
    Image,
    KeyboardAvoidingView,
    Keyboard,
    TouchableOpacity,
    ScrollView,
} from "react-native";
import Svg, {
  Circle,
  Ellipse,
  G,
  TSpan,
  TextPath,
  Path,
  Polygon,
  Polyline,
  Line,
  Rect,
  Use,
  Symbol,
  Defs,
  LinearGradient,
  RadialGradient,
  Stop,
  ClipPath,
  Pattern,
  Mask,
} from 'react-native-svg';
import { Avatar, Overlay, Button } from "react-native-elements";
import { SafeAreaProvider } from "react-native-safe-area-context";
import {
    DrawerContentScrollView,
    DrawerItemList,
    DrawerItem,
} from "@react-navigation/drawer";
import { useNavigation } from "@react-navigation/native";
import { AsyncStorage } from "react-native";
import { useTheme } from '@react-navigation/native';

import Background from './Background';
import { ThemeContext } from './../../Contexts/theme-context';


const CustomSidebarMenu = (props) => {

const [sportMode, toggleSport] = useState(false);
const { dark, sport, theme, toggle, sportToggle } = useContext(ThemeContext);

    // import the user first and last name
    let first = props.firstName;
    let last = props.lastName;
    return (
        <Background>

            <View style={{
                padding: "10%",
                marginHorizontal: '15%',
                flexDirection: 'row-reverse',
                justifyContent: 'space-evenly',
                alignItems: 'center',
            }}>
            <Svg width="77" height="19">
                <Path d="M9.24782 5.3553C9.04068 5.01415 8.75435 4.75218 8.38883 4.56942C8.03549 4.38666 7.61513 4.29528 7.12776 4.29528C6.22613 4.29528 5.51335 4.5877 4.98943 5.17254C4.4777 5.75738 4.22183 6.54326 4.22183 7.53018C4.22183 8.63895 4.49597 9.48575 5.04426 10.0706C5.60474 10.6433 6.41499 10.9296 7.47501 10.9296C8.72999 10.9296 9.62553 10.363 10.1616 9.22988H6.5612V6.65292H13.2503V10.1254C12.9701 10.8077 12.5558 11.4474 12.0075 12.0444C11.4714 12.6415 10.7891 13.1349 9.96059 13.5248C9.13207 13.9025 8.18779 14.0914 7.12776 14.0914C5.83624 14.0914 4.69092 13.8172 3.69182 13.2689C2.70489
                    12.7085 1.93729 11.9348 1.389 10.9479C0.852895 9.94875 0.584842 8.80953 0.584842 7.53018C0.584842 6.26303 0.852895 5.13599 1.389 4.14907C1.93729 3.14996 2.70489 2.37626 3.69182 1.82797C4.67874 1.2675 5.81796 0.987264 7.10949 0.987264C8.72999 0.987264 10.0702 1.37716 11.1303 2.15695C12.1903 2.93674 12.8482 4.00286 13.1041 5.3553H9.24782ZM25.8945 3.74699L19.3882 18.8798H15.4953L17.9443 13.5614L13.7408 3.74699H17.725L19.8816 9.55886L21.9651 3.74699H25.8945ZM40.2282 3.65561C41.5197 3.65561 42.531 4.0455 43.262 4.82529C44.0053 5.60508 44.3769 6.6712 44.3769 8.02364V14H40.7947V8.49883C40.7947 7.95054 40.6424 7.52409 40.3378 7.21949C40.0332 6.91488 39.619 6.76258 39.095 6.76258C38.5711 6.76258 38.1569
                     6.91488 37.8522 7.21949C37.5476 7.52409 37.3953 7.95054 37.3953 8.49883V14H33.8132V8.49883C33.8132 7.95054 33.6609 7.52409 33.3563 7.21949C33.0639 6.91488 32.6557 6.76258 32.1318 6.76258C31.5957 6.76258 31.1753 6.91488 30.8707 7.21949C30.5661 7.52409 30.4138 7.95054 30.4138 8.49883V14H26.8316V3.74699H30.4138V5.09943C30.7306 4.6608 31.1387 4.31355 31.6383 4.05768C32.15 3.78963 32.7349 3.65561 33.3928 3.65561C34.1482 3.65561 34.8184 3.82009 35.4032 4.14907C36.0002 4.47804 36.4693 4.94104 36.8105 5.53807C37.176 4.97759 37.6573 4.52678 38.2543 4.18562C38.8514 3.83228 39.5093 3.65561 40.2282 3.65561ZM52.8641 14L50.3054 9.24816H49.9216V14H46.3395V1.1152H51.9868C53.0225 1.1152 53.8998 1.29796 54.6186
                     1.66349C55.3375 2.01683 55.8797 2.51029 56.2452 3.14387C56.6107 3.76526 56.7935 4.46586 56.7935 5.24565C56.7935 6.12291 56.5498 6.89661 56.0625 7.56674C55.5873 8.22468 54.8867 8.69378 53.9607 8.97401L56.8666 14H52.8641ZM49.9216 6.79913H51.6944C52.1818 6.79913 52.5473 6.68338 52.791 6.45188C53.0347 6.22038 53.1565 5.88532 53.1565 5.44668C53.1565 5.03242 53.0286 4.70954 52.7727 4.47804C52.529 4.23436 52.1696 4.11251 51.6944 4.11251H49.9216V6.79913ZM57.8377 8.86436C57.8377 7.80433 58.0265 6.87833 58.4042 6.08636C58.7941 5.29438 59.3181 4.68517 59.976 4.25872C60.6461 3.83228 61.3894 3.61905 62.2057 3.61905C62.9124 3.61905 63.5216 3.75917 64.0333 4.03941C64.5451 4.31965 64.9411 4.69736 65.2213
                     5.17254V3.74699H68.8035V14H65.2213V12.5744C64.9411 13.0496 64.539 13.4273 64.0151 13.7076C63.5033 13.9878 62.9002 14.1279 62.2057 14.1279C61.3894 14.1279 60.6461 13.9147 59.976 13.4883C59.3181 13.0618 58.7941 12.4526 58.4042 11.6606C58.0265 10.8565 57.8377 9.92438 57.8377 8.86436ZM65.2213 8.86436C65.2213 8.20641 65.0385 7.68858 64.673 7.31087C64.3197 6.93316 63.881 6.7443 63.3571 6.7443C62.821 6.7443 62.3763 6.93316 62.023 7.31087C61.6696 7.67639 61.4929 8.19422 61.4929 8.86436C61.4929 9.5223 61.6696 10.0462 62.023 10.4361C62.3763 10.8138 62.821 11.0027 63.3571 11.0027C63.881 11.0027 64.3197 10.8138 64.673 10.4361C65.0385 10.0584 65.2213 9.53449 65.2213 8.86436ZM76.8942 10.9479V14H75.3407C72.7211
                      14 71.4113 12.7024 71.4113 10.1071V6.72603H70.1502V3.74699H71.4113V1.26141H75.0117V3.74699H76.8759V6.72603H75.0117V10.162C75.0117 10.4422 75.0726 10.6433 75.1945 10.7651C75.3285 10.8869 75.5478 10.9479 75.8524 10.9479H76.8942Z" fill="white"/>
            </Svg>
            <Svg width="27" height="22">
                <Path d="M15.411 1.6858V4.95322H11.589C11.4868 4.31844 11.2385 4.09136 10.7877 3.92398H4.68493C4.14254 4.12307 3.96095 4.3551 3.82192 4.95322V11.0643C3.91371 11.6567 4.09172 11.8655 4.62329 12.0292H10.8493C11.2847 11.8593 11.4397 11.6871 11.5816 11.2199V9.98057H7.71371V5.98246H15.411V14.2807C15.0955 15.3965 14.7082 15.7618 13.6978 16.0175H1.78767C0.696463 15.7865 0.265521 15.4068 0 14.0611V1.92982C0.186471 0.79477 0.490894 0.365306 1.5411 0H13.9315C14.9231 0.436814 15.1988 0.810715 15.411 1.6858Z" fill="white"/>
                <Path d="M21.5388 5.98246H16.2123V9.97076H21.5137C22.5918 10.3469 22.9841 10.7666 23.1164 12.0292C22.9332 13.2712 22.5455 13.6711 21.5137 14.0234H16.2123C16.0194 15.8095 15.4914 16.4573 13.8082 16.8538H11.589V22H15.411V18.0117H21.8219L23.1164 22H27L25.1507 16.4035L25.274 16.2749L25.8904 15.4386L26.3836 14.6667L26.7534 13.7018C26.8619 13.332 26.8938 13.12 26.9384 12.7368V11.9006L26.8767 11.0643L26.6301 9.97076C26.3645 9.30423 26.1867 8.94766 25.7671 8.36257C25.1685 7.58732 24.7914 7.227 23.9795 6.75439C23.1387 6.32241 22.5556 6.15684 21.5388 5.98246Z" fill="white"/>
            </Svg>
            </View>

            <View style={{
                alignItems: "center",
                overflow: "hidden",
                transform: [{ translateY: "8%" }],
            }}>
                <View style={{
                    justifyContent: "center",
                }}>
                <Svg width="80" height="80" viewBox="0 0 80 80" fill="none">
                    <Circle cx="39.4901" cy="40.0058" r="35.3183" fill={theme.sidebarProfileGradient} />
                    <Defs>
                    <RadialGradient id="paint1_radial_608_852" cx=".2" cy=".5" r="5" gradientUnits="userSpaceOnUse" gradientTransform="translate(44.6548 9.353) rotate(106.19) scale(53.6247)">
                        <Stop stopColor="#151735"/>
                        <Stop offset="0.96875" stopColor="#45406F"/>
                    </RadialGradient>
                    </Defs>
                    <Defs>
                    <RadialGradient id="paint0_radial_608_852" cx=".9" cy=".5" r="2" gradientUnits="userSpaceOnUse" gradientTransform="translate(44.6547 9.353) rotate(106.881) scale(52.2213)">
                        <Stop stopColor="#300E41"/>
                        <Stop offset="1" stopColor="#8F4C94"/>
                    </RadialGradient>
                    </Defs>

                    <Defs>
                    <RadialGradient id="paint0_radial_676_2229" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(46.5 17) rotate(129.401) scale(54.353)">
                        <Stop stopColor="#9F277F"/>
                        <Stop offset="1" stopColor="#40136B"/>
                    </RadialGradient>
                    </Defs>

                    <Defs>
                    <RadialGradient id="paint0_radial_676_2230" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(46.5 17) rotate(129.401) scale(54.353)">
                        <Stop stopColor="#234A61"/>
                        <Stop offset="1" stopColor="#1B1E2A"/>
                    </RadialGradient>
                    </Defs>

                </Svg>
                <Text style={{ paddingLeft: "7%", paddingBottom:'1%', position: 'absolute', color: 'white', fontSize:22, fontWeight: '600' }}> {first.charAt(0) + last.charAt(0)} </Text>
                </View>
                <Text
                    style={{
                        fontWeight: "600",
                        fontSize: 20,
                        color: "white",
                        paddingTop: "5%",
                    }}
                >
                    {" "}
                    {first} {last}{" "}
                </Text>
            </View>

            <DrawerContentScrollView {...props} scrollEnabled={false}>
                <DrawerItemList {...props} />
            </DrawerContentScrollView>

<TouchableOpacity
          style={{
                                  marginHorizontal: 40,
                    marginBottom: 40,
            shadowColor: "#000",
              shadowOffset: {
                width: 0,
                height: 1,
              },
              shadowOpacity: 0.22,
              shadowRadius: 2.22,
                            paddingRight: "5%",


              elevation: 3,
          }}
          onPress={() => {
                    props.navigation.toggleDrawer();
                    Alert.alert(
                        "Logout",
                        "Are you sure? You want to logout?",
                        [
                            {
                                text: "Cancel",
                                onPress: () => {
                                    return null;
                                },
                            },
                            {
                                text: "Confirm",
                                onPress: () => {
                                    AsyncStorage.clear();
                                    props.nav.replace( 'Auth' );
                                    // props.navigation.replace('Auth');
                                },
                            },
                        ],
                        { cancelable: false }
                    );
                }}
        >
        {/* !!!! translate svg sizes to adaptive sieze !!!! */}
        <Svg width="120" height="46" viewBox="0 0 120 46" fill="none">
          <Path
                    d= "M0 10.66C0 4.77266 4.77264 0 10.66 0H108.9C114.787 0 119.56 4.77264 119.56 10.66V35.03C119.56
                        40.9173 114.787 45.69 108.9 45.69H10.66C4.77265 45.69 0 40.9174 0 35.03V10.66ZM31.9424 18.0924L30.8687
                        19.1661L32.0719 20.3769H25.8503V21.9H32.0719L30.8687 23.1031L31.9424 24.1845L34.9885 21.1384L31.9424 18.0924ZM22.8043
                        15.8079H28.1349V14.2848H22.8043C21.9666 14.2848 21.2812 14.9702 21.2812 15.8079V26.469C21.2812 27.3067 21.9666 27.9921 22.8043
                        27.9921H28.1349V26.469H22.8043V15.8079ZM59.6475 24.6262H55.384V16.4943H53.3761V26.2393H59.6475V24.6262ZM60.792 20.6305C60.5153
                        21.1927 60.377 21.833 60.377 22.5514V22.6384C60.377 23.7896 60.6871 24.6999 61.3073 25.3692C61.932 26.0385 62.7664 26.3731 63.8105
                        26.3731C64.8546 26.3731 65.6868 26.0385 66.307 25.3692C66.9272 24.6954 67.2373 23.803 67.2373 22.692L67.2239 22.1967C67.1525 21.1704 66.8067
                        20.3584 66.1865 19.7604C65.5708 19.1625 64.7743 18.8636 63.7971 18.8636C63.11 18.8636 62.5054 19.0175 61.9833 19.3254C61.4657 19.6333 61.0686 20.0683
                        60.792 20.6305ZM62.6995 24.2715C62.4407 23.9056 62.3113 23.3791 62.3113 22.692C62.3113 21.92 62.4407 21.3511 62.6995 20.9853C62.9583 20.6149 63.3242
                        20.4297 63.7971 20.4297C64.2746 20.4297 64.6449 20.6149 64.9082 20.9853C65.1714 21.3556 65.303 21.8777 65.303 22.5514C65.303 23.3412 65.1714 23.9168 64.9082
                        24.2782C64.6449 24.6352 64.279 24.8137 63.8105 24.8137C63.3286 24.8137 62.9583 24.6329 62.6995 24.2715ZM68.9373 19.8809C68.4108 20.5591 68.1476 21.4538 68.1476
                        22.5648V22.6451C68.1476 23.7695 68.4153 24.6731 68.9507 25.3558C69.4906 26.034 70.1956 26.3731 71.0657 26.3731C71.793 26.3731 72.3798 26.121 72.826 25.6168V26.005C72.826
                        26.5092 72.6832 26.8974 72.3976 27.1696C72.112 27.4462 71.7127 27.5845 71.1996 27.5845C70.5124 27.5845 69.9279 27.3146 69.446 26.7747L68.5893 27.9527C68.8481 28.2873 69.2296
                        28.5595 69.7338 28.7692C70.238 28.9834 70.7556 29.0905 71.2866 29.0905C71.9871 29.0905 72.5984 28.9678 73.1205 28.7224C73.6425 28.4769 74.0463 28.12 74.3319 27.6515C74.6219 27.183 74.7669 26.6319 74.7669
                        25.9983V18.9974H73.0134L72.9331 19.6801C72.4913 19.1358 71.8733 18.8636 71.0791 18.8636C70.1822 18.8636 69.4683 19.2027 68.9373 19.8809ZM70.4767 24.2514C70.2135 23.8766 70.0818 23.3613 70.0818 22.7054C70.0818 21.9513 70.2135
                        21.3846 70.4767 21.0053C70.7444 20.6261 71.1103 20.4364 71.5744 20.4364C72.15 20.4364 72.5672 20.6573 72.826 21.099V24.1444C72.5716 24.5861 72.15 24.807 71.561 24.807C71.1014 24.807 70.74 24.6218 70.4767 24.2514ZM76.3732 20.6305C76.0966 21.1927
                        75.9583 21.833 75.9583 22.5514V22.6384C75.9583 23.7896 76.2684 24.6999 76.8886 25.3692C77.5133 26.0385 78.3477 26.3731 79.3918 26.3731C80.4359 26.3731 81.2681 26.0385 81.8883 25.3692C82.5085 24.6954 82.8186 23.803 82.8186 22.692L82.8052 22.1967C82.7338 21.1704 82.388
                        20.3584 81.7678 19.7604C81.152 19.1625 80.3556 18.8636 79.3784 18.8636C78.6913 18.8636 78.0867 19.0175 77.5646 19.3254C77.047 19.6333 76.6499 20.0683 76.3732 20.6305ZM78.2807 24.2715C78.022 23.9056 77.8926 23.3791 77.8926 22.692C77.8926 21.92 78.022 21.3511 78.2807 20.9853C78.5395
                        20.6149 78.9054 20.4297 79.3784 20.4297C79.8558 20.4297 80.2262 20.6149 80.4894 20.9853C80.7527 21.3556 80.8843 21.8777 80.8843 22.5514C80.8843 23.3412 80.7527 23.9168 80.4894 24.2782C80.2262 24.6352 79.8603 24.8137 79.3918 24.8137C78.9099 24.8137 78.5395 24.6329 78.2807 24.2715ZM86.3659
                        26.3731C87.2092 26.3731 87.8696 26.0831 88.347 25.503L88.4005 26.2393H90.221V18.9974H88.2801V24.1243C88.0347 24.5794 87.584 24.807 86.9281 24.807C86.2409 24.807 85.8974 24.4299 85.8974 23.6758V18.9974H83.9631V23.7428C83.972 24.6039 84.1795 25.2576 84.5855 25.7038C84.996 26.15 85.5895 26.3731
                        86.3659 26.3731ZM93.9959 18.9974V17.2171H92.0616V18.9974H91.0041V20.4164H92.0616V24.3184C92.0884 25.6882 92.78 26.3731 94.1364 26.3731C94.538 26.3731 94.9284 26.3151 95.3077 26.1991V24.7333C95.1426 24.7646 94.953 24.7802 94.7388 24.7802C94.4488 24.7802 94.2524 24.7222 94.1498 24.6062C94.0472
                        24.4902 93.9959 24.2983 93.9959 24.0306V20.4164H95.2341V18.9974H93.9959Z"
                            fill="white"/>

          </Svg>
        </TouchableOpacity>
  </Background>

    );
};

export default CustomSidebarMenu;